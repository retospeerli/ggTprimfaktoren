<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>ggT Ã¼ber Primfaktoren â€“ 6. Klasse</title>
<style>
  :root { font-family: system-ui; background: #f3f4f6; }
  body { margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
  .app { background: #fff; padding: 2rem 2.2rem; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); width: 840px; box-sizing: border-box; }
  h1 { text-align: center; font-size: 1.4rem; margin-top: 0; }

  .explanation { background: #f9fafb; border-radius: 12px; padding: 1rem; border: 1px solid #e5e7eb; font-size: 0.9rem; margin-bottom: 1rem; }
  .explanation h2 { font-size: 1rem; margin: 0 0 .4rem; }
  ol { margin-top: .3rem; line-height: 1.4; }
  strong { color: #111; }

  .ex-table { margin: .4rem 0; border-collapse: collapse; }
  .ex-table th, .ex-table td { border: 1px solid #d1d5db; padding: .25rem .5rem; text-align:center; font-size:.85rem; }
  .ex-table th { background: #e5e7eb; }

  .numbers { display:flex; justify-content:center; gap:3rem; font-size:2.1rem; font-weight:700; margin-bottom:.2rem; }
  .labels { display:flex; justify-content:center; gap:3rem; font-size:.9rem; color:#555; margin-bottom:.3rem; }

  .row { display:flex; justify-content:center; flex-wrap:wrap; gap:.3rem; margin-bottom:.5rem; }
  .pf-input { width:2.4rem; height:2.4rem; font-size:1.1rem; text-align:center; border-radius:10px; border:2px solid #d1d5db; background:#f9fafb; }
  .correct { background:#dcfce7; border-color:#16a34a; }
  .incorrect { background:#fee2e2; border-color:#b91c1c; }

  .ggt-row { text-align:center; margin-top:.8rem; }
  .ggt-input { width:6rem; height:2.8rem; font-size:1.4rem; font-weight:700; text-align:center; border-radius:10px; border:2px solid #d1d5db; background:#f9fafb;}

  .btns { display:flex; justify-content:center; gap:.5rem; margin-top:.8rem; }
  .btn { padding:.5rem 1rem; border-radius:999px; border:1px solid #d1d5db; background:#f9fafb; cursor:pointer; font-weight:600; }
  .btn.primary { background:#2563eb; border-color:#1d4ed8; color:#fff; }
  .btn.primary:hover { background:#1d4ed8; }

  .feedback { text-align:center; font-weight:600; min-height:1.3rem; margin-top:.6rem; font-size:.95rem; }
  .ok { color:#15803d; }
  .err { color:#b91c1c; }
</style>
</head>
<body>

<div class="app">
<h1>ggT mit der Primfaktorzerlegung bestimmen</h1>

<div class="explanation">
  <h2>So bestimmst du den ggT:</h2>
  <ol>
    <li>Zerlege beide Zahlen in <strong>Primfaktoren</strong>.</li>
    <li>Schau, welche Primzahlen in <strong>beiden</strong> Zerlegungen vorkommen.</li>
    <li>Nimm jede gemeinsame Primzahl so oft, wie sie in der <strong>kleineren HÃ¤ufigkeit</strong> vorkommt.</li>
    <li>Multipliziere diese Faktoren â†’ das ist der <strong>ggT</strong>.</li>
  </ol>

  <strong>Beispiel: 12 und 18</strong><br><br>
  12 = 2 Â· 2 Â· 3<br>
  18 = 2 Â· 3 Â· 3<br><br>

  <table class="ex-table">
    <tr><th>Primzahl</th><th>in 12</th><th>in 18</th><th>wir nehmen</th></tr>
    <tr><td>2</td><td>2Ã—</td><td>1Ã—</td><td><strong>1Ã—</strong></td></tr>
    <tr><td>3</td><td>1Ã—</td><td>2Ã—</td><td><strong>1Ã—</strong></td></tr>
  </table>

  ðŸ‘‰ ggT(12, 18) = 2 Â· 3 = <strong>6</strong><br><br>

  <strong>Bei der Aufgabe unten:</strong><br>
  âžœ Zerlege A und B vollstÃ¤ndig in Primfaktoren (z.&nbsp;B. 50 = 2 Â· 5 Â· 5).<br>
  âžœ Trage alle Primfaktoren (Reihenfolge egal) in die Felder ein.<br>
  âžœ Unten gibst du den ggT(A, B) ein und klickst â€žÃœberprÃ¼fenâ€œ.
</div>

<div class="labels"><div>Zahl A</div><div>Zahl B</div></div>
<div class="numbers"><div id="a"></div><div id="b"></div></div>

<div><strong>Primfaktoren von A:</strong></div>
<div class="row" id="rowA"></div>

<div><strong>Primfaktoren von B:</strong></div>
<div class="row" id="rowB"></div>

<div class="ggt-row">
  <strong>ggT(A,B) = </strong>
  <input id="ggt" class="ggt-input">
</div>

<div class="btns">
  <button id="check" class="btn primary">ÃœberprÃ¼fen</button>
  <button id="new" class="btn">Neue Zahlen</button>
</div>

<div id="feedback" class="feedback"></div>

</div>

<script>
const FIELDS = 10;
let a, b, apf, bpf, ggtVal;

const aEl = document.getElementById("a");
const bEl = document.getElementById("b");
const rowA = document.getElementById("rowA");
const rowB = document.getElementById("rowB");
const ggtIn = document.getElementById("ggt");
const fb = document.getElementById("feedback");

function gcd(x, y) {
  return y ? gcd(y, x % y) : x;
}

function isPrime(n) {
  if (n < 2) return false;
  for (let i = 2; i * i <= n; i++) {
    if (n % i === 0) return false;
  }
  return true;
}

function primeFactors(n) {
  const r = [];
  let d = 2;
  while (n > 1) {
    while (n % d === 0) {
      r.push(d);
      n /= d;
    }
    d++;
  }
  return r;
}

function newTask() {
  // Zahlenbereich 12â€“80, keine Primzahlen, und nicht gleich
  do {
    a = Math.floor(Math.random() * 69) + 12; // 12..80
    b = Math.floor(Math.random() * 69) + 12;
  } while (a === b || isPrime(a) || isPrime(b));

  apf = primeFactors(a);
  bpf = primeFactors(b);
  ggtVal = gcd(a, b);

  aEl.textContent = a;
  bEl.textContent = b;
  fb.textContent = "";
  fb.className = "feedback";
  ggtIn.value = "";
  ggtIn.classList.remove("correct", "incorrect");

  buildRow(rowA);
  buildRow(rowB);
}

function buildRow(container) {
  container.innerHTML = "";
  for (let i = 0; i < FIELDS; i++) {
    const inp = document.createElement("input");
    inp.type = "text";
    inp.className = "pf-input";
    container.appendChild(inp);
  }
}

function countValues(arr) {
  const m = new Map();
  for (const v of arr) {
    m.set(v, (m.get(v) || 0) + 1);
  }
  return m;
}

function checkRow(container, correctFactors) {
  const correctCount = countValues(correctFactors);
  const inputs = Array.from(container.children);
  const userValues = [];

  // einsammeln
  inputs.forEach(inp => {
    inp.classList.remove("correct", "incorrect");
    const v = parseInt(inp.value, 10);
    if (!isNaN(v)) {
      userValues.push(v);
    }
  });

  const userCount = countValues(userValues);
  let ok = true;

  // 1. Jede erwartete Primzahl muss mit richtiger HÃ¤ufigkeit vorkommen
  for (const [p, c] of correctCount.entries()) {
    if (userCount.get(p) !== c) {
      ok = false;
    }
  }

  // 2. Es dÃ¼rfen keine zusÃ¤tzlichen Primzahlen vorkommen
  for (const [p, c] of userCount.entries()) {
    if (!correctCount.has(p)) {
      ok = false;
    }
  }

  // Markierung der einzelnen Felder
  inputs.forEach(inp => {
    const v = parseInt(inp.value, 10);
    if (!isNaN(v)) {
      if (correctFactors.includes(v)) {
        inp.classList.add("correct");
      } else {
        inp.classList.add("incorrect");
      }
    }
  });

  return ok;
}

function check() {
  const okA = checkRow(rowA, apf);
  const okB = checkRow(rowB, bpf);

  const g = parseInt(ggtIn.value, 10);
  const okG = (g === ggtVal);

  ggtIn.classList.remove("correct", "incorrect");
  ggtIn.classList.add(okG ? "correct" : "incorrect");

  if (okA && okB && okG) {
    fb.textContent = "Super! Zerlegungen und ggT sind korrekt. ðŸŽ‰";
    fb.className = "feedback ok";
  } else {
    fb.textContent = "Noch nicht ganz richtig. PrÃ¼fe deine Primfaktoren und den ggT.";
    fb.className = "feedback err";
  }
}

document.getElementById("check").addEventListener("click", check);
document.getElementById("new").addEventListener("click", newTask);

newTask();
</script>

</body>
</html>
